<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Tomat</title>
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
  </head>
  <body>
    <script>
      const {ipcRenderer} = require('electron');
      ipcRenderer.on('load', (event, arg) => {
        document.getElementById('breaklength').value = arg.breakTimer;
        document.getElementById('sessionlength').value = arg.sessionTimer;
        document.getElementById('longbreaklength').value = arg.longBreakTimer;
        document.getElementById('starthour').value = arg.startHour;
        document.getElementById('endhour').value = arg.endHour;
      })
      ipcRenderer.on('update', (event, arg) => {
        // do something
      })
      window.onload = function() {
        ipcRenderer.send('load', '')
      };
      function update() {
        document.getElementById('update').innerHTML = "Updated!";
        document.getElementById('update').classList.remove('btn-primary')
        document.getElementById('update').classList.add('btn-success')
        
        ipcRenderer.send('update', {
          breakTimer: document.getElementById('breaklength').value,
          sessionTimer: document.getElementById('sessionlength').value,
          longBreakTimer: document.getElementById('longbreaklength').value,
          startHour: document.getElementById('starthour').value,
          endHour: document.getElementById('endhour').value
        })
        setTimeout(() => {
          document.getElementById('update').innerHTML = "Update";
          document.getElementById('update').classList.remove('btn-success')
          document.getElementById('update').classList.add('btn-primary')
        }, 2000);
        
      }
    </script>
    <h1>Tomat</h1>
    <br />
    <h5>Pomodoro app for Windows, Mac and Linux.</h5>
    <h4 id="text">Change your settings for tomat here:</h4>
        <div class="form-group row">
          <label class="col-sm-4 col-form-label" for="breaklength">Break Length: </label>
          <div class="col-sm-3">
            <input class="form-control" type="number" id="breaklength" min="1" max="59" value="1">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 col-form-label" for="sessionlength">Session Length: </label>
          <div class="col-sm-3">
            <input class="form-control" type="number" id="sessionlength" min="1" max="59" value="1">
          </div>
          <p>mins</p>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 col-form-label" for="longbreaklength">Long Break Length: </label>
          <div class="col-sm-3">
          <input class="form-control" type="number" id="longbreaklength" min="1" max="59" value="1">
        </div>
        <p>mins</p>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 col-form-label" for="starthour">Starting Time: </label>
          <div class="col-sm-3">
          <input class="form-control" type="time" id="starthour">
        </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 col-form-label" for="endhour">Ending Time: </label>
          <div class="col-sm-3">
          <input class="form-control" type="time" id="endhour">
        </div>
        </div>
        <div class="form-group">
          <button class="btn btn-primary" id="update" onclick="update()">Update</button>
        </div>
    </div>
    <br />
    <div class="footer">
      Made in the &#10052;&nbsp; by Viktor Andersson @ <a href="https://vikbytes.com" target="_blank">vikbytes.com</a>
    </div>
  </body>
</html>

